# X11 configuration

include = ["desktop.toml"]

# Override the default settings here

# General settings
[general]
# Filesystem size in MiB
filesystem_size = 2048

# Package settings
[packages]
adwaita-icon-theme = {}
bash = {}
gtk3 = {}
libxcursor = {}
mesa = {}
smallvil = {}
softbuffer-wayland = {}
wayland-rs = {}
webkitgtk3 = {}
winit-wayland = {}
xkeyboard-config = {}

[[files]]
path = "/usr/lib/init.d/10_wayland_env"
data = """
export XDG_RUNTIME_DIR /tmp/run/user/0
mkdir -p $XDG_RUNTIME_DIR
export WAYLAND_DISPLAY wayland-1
glib-compile-schemas /usr/share/glib-2.0/schemas/
"""

# Overridden to launch smallvil instead of orblogin
[[files]]
path = "/usr/lib/init.d/20_orbital"
data = """
audiod
export BROWSER /bin/netsurf-fb
export VT 3
nowait orbital orbital-wayland
unset BROWSER
unset VT
"""

[[files]]
path = "/usr/bin/orbital-wayland"
mode = 0o755
data = """
#!/usr/bin/env bash

export LD_DEBUG=all
export RUST_LOG=debug
smallvil_smallvil &
sleep 2
env G_MAIN_POLL_DEBUG=1 G_MESSAGES_DEBUG=all LD_DEBUG=all WEBKIT_DEBUG=all MiniBrowser&
#softbuffer-wayland_animation &
#wayland-rs_simple_window &
#winit-wayland_window &
"""

[[files]]
path = "/etc/gtk-3.0/settings.ini"
data = """
[Settings]
gtk-cursor-theme-name = "Adwaita"
gtk-icon-theme-name = "Adwaita"
"""
