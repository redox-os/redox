#TODO not compiled or tested
# build instructions: https://espanso.org/docs/install/linux/#x11-compile
[source]
git = "https://github.com/espanso/espanso"
[build]
template = "custom"
dependencies = [
    "libxkbcommon",
    "dbus",
    "wxwidgets-gtk3",
    "openssl3",
    "libx11",
    "libxtst",
]
script = """
DYNAMIC_INIT
package=espanso
"${COOKBOOK_CARGO}" build \
            --manifest-path "${COOKBOOK_SOURCE}/Cargo.toml" \
            --package "${package}" \
            --release \
            --no-default-features \
            --features=vendored-tls,modulo
        mkdir -pv "${COOKBOOK_STAGE}/usr/bin"
        cp -v \
            "target/${TARGET}/release/${package}" \
            "${COOKBOOK_STAGE}/usr/bin/${package}"
"""
