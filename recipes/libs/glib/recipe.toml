[source]
tar = "https://download.gnome.org/sources/glib/2.87/glib-2.87.0.tar.xz"
blake3 = "26b77ae24bc02f85d1c6742fe601167b056085f117cda70da7b805cefa6195e9"
patches = [
    "redox.patch",
]

[build]
template = "custom"
dependencies = [
    "gettext",
    "libffi",
    "libiconv",
    "pcre2",
    "zlib",
# this will recurse: glib -> host:gobject -> host:glib
    "host:gobject-introspection",
]
script = """
DYNAMIC_INIT
COOKBOOK_MESON_FLAGS+=(
    -Ddefault_library=shared
    -Dxattr=false
    -Dlibmount=disabled
    -Dselinux=disabled
)

if [ "$TARGET" != "$COOKBOOK_HOST_TARGET" ]; then
COOKBOOK_MESON_FLAGS+=(-Dintrospection=enabled)
fi

cookbook_meson
"""
